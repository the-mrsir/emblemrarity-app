<!doctype html>
<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
<title>Emblem Rarity â€” Admin</title>
<style>body{font-family:system-ui,Segoe UI,Arial;padding:24px;max-width:760px;margin:0 auto}input,button{padding:8px 10px;border:1px solid #ccc;border-radius:8px}button{cursor:pointer}pre{background:#f6f8fa;padding:12px;border-radius:8px;overflow:auto}</style>
</head><body>
<h2>Admin</h2>
<p>Enter your key and run a refresh. Nothing user-specific is stored.</p>
<p><input id="key" placeholder="admin key" style="width:240px"> <button id="ping">Ping</button> <button id="refresh">Refresh (all)</button> <button id="refresh200">Refresh 200</button> <button id="snapshot">Write snapshot</button></p>
<pre id="out"></pre>
<script>
const o = document.getElementById('out');
document.getElementById('ping').onclick = async ()=>{
  const key = document.getElementById('key').value.trim();
  const r = await fetch(`/admin/ping?key=${encodeURIComponent(key)}`);
  o.textContent = await r.text();
};
document.getElementById('refresh').onclick = async ()=>{
  const key = document.getElementById('key').value.trim();
  const r = await fetch(`/admin/refresh?key=${encodeURIComponent(key)}`);
  o.textContent = await r.text();
};
document.getElementById('refresh200').onclick = async ()=>{
  const key = document.getElementById('key').value.trim();
  const r = await fetch(`/admin/refresh?key=${encodeURIComponent(key)}&limit=200`);
  o.textContent = await r.text();
};
document.getElementById('snapshot').onclick = async ()=>{
  const key = document.getElementById('key').value.trim();
  const r = await fetch(`/admin/snapshot`, { method: "POST", headers: { "x-admin-key": key } });
  o.textContent = await r.text();
};
</script>
</body></html>
